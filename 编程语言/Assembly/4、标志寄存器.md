# 标志寄存器

普通寄存器用来存放数据，而标记寄存器每一位都表达不同的含义。标记寄存器是按位表示的，每一位都有不同的含义，用来记录不同的信息。

在8086CPU中标志寄存器的 1、3、5、12、13、14、15位没有被使用，其余的位都表达不同的含义。

在8086CPU的指令集中， `add sub mul div inc or and` 等指令，大都为运算指令，会对标志寄存器产生影响。而 `mov push pop` 为传送指令，对标志寄存器没有影响。

## 1、 `ZF` 标志

标志寄存器的第6位是 `ZF` 零标志位。

- 结果为0，ZF=1
- 结果非0，ZF=0

> 可以将 1看作true，0看作false

示例：

```assembly
mov ax, 1
sub ax, 1 ; ZF = 1
```

```assembly
mov ax, 2
sub ax, 1 ; ZF = 0
```

## 2、 `PF` 标志

标志寄存器的第2位是 `PF` 奇偶标志位

- 偶数，PF=1
- 奇数，PF=0

## 3、 `SF` 标志

标志寄存器的第7位是 `SF` 符号标志位

- 结果为负，SF=1
- 结果为正，SF=0

## 4、 `CF` 标志

标志寄存器第0位是 `CF` 进位标志位。

在进行无符号数运算时， `CF` 标志位记录了运算结果的最高有效位向更高位的进位值，或从更高位的借位值。

寄存器的位数为0-7当在执行 `10000000b+10000000b` 类似的计算时，最高位相加需要进位到更高一位中，此时寄存器的物理最高位以无法存储，所以会将数据放到 `CF` 标志位中。

## 5、 `OF` 标志

标志寄存器第11位是 `OF` 溢出标志位

在进行有符号数运算时，当有符号数的最高位（字节型数据的第6位）相加需要向符号位进位时，就会产生溢出（例：`01000000b+01000000b` ）。

## 6、 `DF` 标志

标志寄存器第10位是 `DF` 方向标志位

在串处理指令中，控制每次操作后 `SI/DI` 的增减。

- `DF=0` 每次操作后 `si,di` 递增
- `DF=1` 每次操作后 `si,di` 递减

设置 `DF` 标志：

```assembly
cld ; 将DF设置为0
std ; 将DF设置为1
```

## 标志寄存器状态在 `DEBUG` 中的表示

| 标志 | 值为1 | 值为0 |
| ---- | ----- | ----- |
| OF   | OV    | NV    |
| SF   | NG    | PL    |
| ZG   | ZR    | NZ    |
| PF   | PE    | PO    |
| CG   | CY    | NC    |
| DF   | DN    | UP    |

