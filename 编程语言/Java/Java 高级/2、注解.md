# 注解

## 概念

### 什么是注解

注解最常见的就是在  `Spring` 框架中，例如 `@RequestMapping` `@Controller` 等注解，注解是起什么作用？为什么要使用注解？

注解就像一个标签可以标记类、属性和方法，被标记的内容可以使用对应对象 `(Class/Method/Field)` 的 `getAnnotation(Class<T>)` 方法来获取到当前内容上标记的注解，从而做出对应的操作。

为什么使用注解，这就要说到 `AOP(Aspect-Oriented Programming)` 面向切面编程, `AOP` 其实是 `OOP(Object-Oriented Programing)` 面向对象编程的补充和完善，而面向对象编程是一种完整事物的自上而下的关系，当某一些具体的业务需要一个统一的前置或者后置处理时，例如权限控制、日志打印、接口访问量统计等等，面向对象往往会导致大量代码重复，项目复杂度和耦合度也会大大增加。在此情况下面向切面编程就应运而生， `AOP` 使用一种名为“横切”的概念。 ==需要添加AOP笔记链接==

### 格式

#### 基础格式

```java
public @interface AnnotationName {

}
```

#### 添加属性

也可以在注解类中添加属性（看起来是方法，其实相当于属性）

```java
String value() default "";
```

#### 使用注解

使用注解并向属性赋值，当只给一个值且这个值是value时，可以省略属性名。

```java
@AnnotationName(value = "value")
// 等于
@AnnotationName("value")
```

#### 限定使用位置和作用域

限定注解的使用位置，在注解类上添加 `@Target()` 注解，此注解接受单个 `ElementType` 属性或数组。

- `TYPE` ：可使用在类，接口或枚举类上
- `FIELD` ：可使用在属性
- `METHOD` ：可使用在方法
- `PARAMETER` ：可使用在方法参数
- `CONSTRUCTOR` ：可使用在构造参数
- `LOCAL_VARIABLE` ：可使用在局部变量
- `ANNOTATION_TYPE` ：可使用在注解类

```java
@Target({ElementType.TYPE, ElementType.Field})
```

限定注解的生效范围，在注解类上添加 `@Retention()` 注解，此注解接受单个 `RetentionPolicy` 属性。

- `SOURCE` ：注解只在源码层面存在，编译后将会被忽略删除
- `CLASS` ：注解在编译后存在，但在类加载到内存中后注解将会被忽略删除
- `RUNTIME` ：注解在类加载后程序运行时依旧存在，只有此状态的注解会被反射读取到

```java
@Retention(RetentionPolicy.RUNTIME)
```

